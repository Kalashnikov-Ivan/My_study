<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Что такое операционная система и как она работает?</title>
    </head>
    <body>
        <h1 id="">Что такое операционная система и как она работает?</h1>
        <blockquote>
            <p>
                Основа конспекта, лекция - <a href="https://www.youtube.com/watch?v=hb9CTGSJm88&amp;list=PLlb7e2G7aSpRgsZVTYYbpqiFrIcIpf8kp">Что такое операционная система и как она работает</a><br>
                Автор немного переработал и дополнил некоторые моменты: структуру и повествование, постарался дать более глубокое и последовательное разъясление, добавил как скаченные, так и созданные им лично схемы.
            </p>
        </blockquote>

        <p>
            Цель конспекта — последовательно рассмотреть и объяснить принципы устройства и функционирования операционной системы, её основных компонентов и абстракций. 
            <hr>
            Операционные системы окружают нас повсюду – персональные компьютеры, серверы, мобильные устройства (телефон, планшет), сетевые устройства (роутеры, коммутаторы) и даже современные автомобили (борт-компьютер), телевизоры и прочее. Перечислять можно очень долго, ведь они требуются практически в каждой компьютерной системе.<br>
        </p>
        
        <h2 id="br">Введение <br></h2>
        <p>
            Любой компьютер представляет собой связанную совокупность: <strong>процессора, памяти и устройств ввода-вывода</strong>.
        </p>
        <figure>
            <img src="img\basic_architecture.png" width="450px" hidth="450px">
            <details> <summary>Более подробная структура ПК</summary>
                <img src="img\Motherboard_diagram_ru.jpg" width="575px" hidth="300px">
            </details>
        </figure>
            
        <p>
            Сама по себе, аппаратура умеет делать только очень простые, базовые операции, и получается, что непосредственное <em>создание, выполнение и управление</em> сложными процессами (приложениями) на аппаратуре становится крайне неэффективным и неудобным.
        </p>

        <p>
            Например, <strong>процессор</strong> может выполнять только три базовых типа инструкции:
            <ul>
                <li><em>Чтение инструкций/данных из памяти (read)</em></li>
                <li><em>Выполнение интрукции (execute)</em></li>
                <li><em>Запись результата в память (write)</em></li>
            </ul>
        </p>

        <p>
            Возникает вопрос — <strong>Как заставить всё это слаженно и эффективно работать, сделав пользование компьютером удобным как для обычного человека, так и для прикладного программиста?</strong>
        </p>

        <p>
            Чтобы ответить на него более полседовательно, заглянем немного туда, где всё начиналось.
        </p>

        <h3 id="-1"><em>Немного истории</em></h3>
        <blockquote>
            <p>
                На заре компьютерной эпохи, первые компьютеры представляли собой огромные блоки (занимавшие большие комнаты), в которых размещались основные его компоненты: <strong>процессор, память и устройства ввода-вывода</strong>. <br>
                И всего можно было выделить два состояния, в котором, в реальном времени находится компьютерная система:
            </p>
          
            <ul>
                <li>Ввод/Вывод</li>
                <li>Вычисление</li>
            </ul>
            
            <p>
                <strong>Важная идея!</strong><br>
                Так как <strong>вычисления производятся быстрее</strong>, чем непосредственный ввод-вывод данных, разработчикам пришла идея о том, что к ресурсам можно допускать не одного пользователя (<strong>процесс</strong>), а множество, предоставляя им способ независимо друг от друга загружать (ввод) и получать (вывод) данные, чтобы более эффективно использовать ресурсы компьютера и вычислительные модули не простаивали в ожидании.
            </p>
            
            <p>
                Идея <em>многопользовательского режима</em> в использовании ресурсов компьютера нашла свою реализацию в понятии <strong>процесс</strong>. То есть, <strong>каждый процесс - это пользователь ресурсов компьютера</strong>.<br>
                Этот принцип положило начало созданию такой системы, которую мы теперь называем <em>операционной</em> - программной системы, которая осуществляет доступ к ресурсам компьютера и, следовательно, <strong>управляет процессами</strong>.
            </p>
            
            <p>
                Далее, термины: <em>процесс, приложение</em> идут как синонимы термину <em>пользователь ресурсов</em>.
            </p>
        </blockquote>
        
        <h2 id="br-1">Зачем нужна Операционная Система?<br></h2>
        <p>
            Чтобы управлять доступом пользователей (процессов) к ресурсам компьютера и осуществлять другие <em>системные функции</em>, и были разработаны <strong>операционные системы</strong>.
        </p>

        <p>
            <strong><em>Фунции ОС:</em></strong>
            <ul>
                <li><strong>Совместное использование вычислительный ресурсов группой приложений — центральная функция ОС, которая является базой для разных системных архитектур</strong></li>
                <li>Абстракция оборудования для удобства и переносимости
                    <ul>
                        <li>то есть реализация единого интерфейса для разного, но схожего по функциям оборудования.</li>
                    </ul>
                </li>
                <li>Изоляция ошибок приложений друг от друга (и от ядра ОС)</li>
                <li>Переносимость данных между приложениями (процессами)
                    <ul>
                        <li>файлы и файловая система, Inter Process Communication (IPC)</li>
                    </ul>
                </li>
            </ul>    
        </p>

        <p>
            <strong><em>Основные абстракции ОС</em></strong>
            <ul>
                <li>Процессы и потоки</li>
                <li>Файлы и файловые системы</li>
                <li>Адресное пространство и память</li>
                <li>Сокеты, протоколы, устройства</li>
            </ul>        
        </p>

        <h2 id="-2">Положение ОС в уровневой иерархии организации компьютера</h2>

        <figure>
            <img src="img\GeneralizedLayeredComputerStructure_OS.png" width="650px" hidth="1150px">
        </figure>

        <p>
            Современный компьютер можно представить в виде <strong>иерархии уровней</strong> (от двух и более), где на каждом уровне выделяются свои абстракции и набор возможных функций.
        </p>

        <p>
            Операционная система является одним из таких уровней и представляет собой <strong>интерфейс</strong> ("прослойку") между пользователем ресурсов компьютера и самими ресурсами, обеспечивающий управление взаимодействием между <em>пользователь-ресурс</em>, так и взаимодействием <em>пользователь-пользователь</em> и <em>устройство-устройство</em>.
        </p>

        <p>
            В целом, наиболее <em>общей схемой</em> это можно отобразить так:<br>
            <img src="img\OS_monolit-OS_1.png" width="450px" hidth="150px">
        </p>

        <h2 id="-3">Как приложения взаимодействуют с ОС?</h2>

        <p>Взаимодействие процессов с ОС осуществляется с помощью <strong>системных вызовов</strong>.<br>
        <strong>Механизм системных вызовов</strong> — это интерфейс, который предоставляет ядро ОС (<strong>kernel space</strong>) пользовательским процессам (<strong>user space</strong>).<br>
        <strong>Системный вызов</strong> – обращение <em>пользовательского</em> процесса к <em>ядру</em> операционной системы для выполнения какой-либо операции.</p>
        
        <blockquote>
            <p>
                <strong>Интерфейс</strong> — способ взаимодействия; некий набор правил и средств взаимодействия двух систем.<br>
                <strong>Kernel space</strong> — адресное пространство ядра ОС, в котором процессы имеют привилегированный доступ к ресурсам компьютера и другим процессам.<br>
                <strong>User space</strong> — адресное пространство, отведённое для пользовательских процессов (программ).
            </p>
        </blockquote>
        
        <p>
            Например, чтобы выполнить обычное действие, с точки зрения прикладного программиста, – вывод строки в консоль, необходимо загрузить исполнимый код в память компьютера и передать его процессору. С помощью <em>системных вызовов</em>, всё это делает <strong>запускающий</strong> процесс (уже запущенный процесс, из которого вызывается новый процесс; одни процессы порождают другие) и передаёт управление.
        </p>
        
        <p>
            То есть с помощью <strong>системных вызовов</strong> выполняются те рутинные действия, которые раньше осуществлялись вручную, — загрузка кода программы в память, передача его на исполнение процессору и прочее.
        </p>
        
        <p>
            <em>Схема организации ОС расширяется добавлением интерфейса для взаимодействия приложений с ядром ОС - <strong>механизмом системных вызовов</strong>:</em><br>
            <img src="img\OS_monolit-OS_2.png" width="450px" hidth="150px">
        </p>
        
        <h2 id="hardware">Как оборудование (hardware) взаимодействует с ОС?</h2>

        <p>
            Одной из функций ОС является — <strong>абстрагирование оборудования</strong>.
        </p>

        <p>
            <em>Что это значит?</em><br>
            У каждого оборудования есть свой фиксированный интерфейс. Например, операции с флешкой, жестким диском и сетевой платой будут похожи по своему типу - "записать/считать данные". Но у каждого устройства для этого, тем не менее, будет свой интерфейс.
        </p>

        <p>
            ОС должка выполнять одни и те же операции над разными типами устройств. И чтобы она выполняла их <em>однообразно</em> — нужно чтобы был <strong>общий интерфейс</strong>. Реализацией этого <em>общего интерфейса</em> занимаются специальные программы - <strong>драйверы устройств</strong>. То есть, ОС обращается к <em>драйверам устройств</em> используя однотипные команды <em>"отправить команду/считать/записать"</em>, а <em>драйвера</em> уже превращает эти команды в то, что понимает конкретное устройство.
        </p>

        <p>
            <em>Схема организации ОС расширяется добавлением интерфейса взаимодействия ОС и оборудования - <strong>специальные программы "драйвера"</strong>::</em><br>
            <img src="img\OS_monolit-OS_3.png" width="450px" hidth="150px">
        </p>

        <!----------------------------Что делает ОС?---------------------------->
        <h2 id="-4">Что делает ядро ОС?</h2>

        <p>
            <strong>Ядро ОС</strong> – центральная часть операционной системы. Причём, это <strong>реакционный механизм</strong>, то есть его работа заключается исключительно в <em>реакции</em> на какие-либо события для их последующей обработки.
        </p>

    <p><em>Что именно?</em></p>
    <ul>
        <li>Обрабывает запросы приложений
            <ul>
                <li><em>системные вызовы</em></li>
            </ul>
        </li>

        <li>Обрабывает запросы оборудования
            <ul>
                <li><em>прерывания</em></li>
            </ul>
        </li>

        <li>Обеспечивает диспетчеризацию процессов (scheduling)
            <ul>
                <li>реализация <em>многопользовательского режима</em> доступа к ресурсам
                    <ul>
                        <li><strong>время работы процессора делится на фрагменты и они распределяются по процессам</strong></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>Обрабатывает исключительные ситуации</li>
    </ul>

    <h2 id="-5">Сервисы ОС</h2>

    <p>
        Функции ОС заключены в её сервисах (модулях). Реализация организации которых зависит от <strong>архитектуры ядра</strong>. Рассмотрим на примере <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%BD%D0%BE%D0%BB%D0%B8%D1%82%D0%BD%D0%BE%D0%B5_%D1%8F%D0%B4%D1%80%D0%BE"><strong>монолитного ядра</strong></a>:
        <img src="img\OS_monolit-All.png" width="450px" hidth="150px">
    </p>

    <ul>
        <li> <h3>Управление процессами (Process scheduler)</h3>
            <ul>
                <li>Запуск (помещение на процессор, выделение процессорного времени)</li>
                <li>"Заморозка"</li>
                <li>Остановка</li>
                <li>Изменение приоритета</li>
            </ul>
        </li>
        <li><h3>Управление памятью (Memory manager)</h3>
            <ul>
                <li>Создание иллюзии уникальности адресного пространства для каждого процесса</li>
                <li>Механизм <strong>виртуальной памяти</strong></li></ul>
            </li>
        <li> <h3>Межпроцессное взаимодействие (IPC)</h3>
            <ul>
                <li>Общая память для нескольких процессов</li>
                <li>Способы обмена данными через те или иные механизмы (file, pipe)</li>
                <li>Механизмы предотвращения коллизий и синхронизации (семафоры, мьютексы)</li>
            </ul>
        </li>
        <li><h3>Файловая система (File system)</h3></li>
        <li><h3>Модель безопасности</h3>
            <ul>
                <li>Пользователи ('юзеры') и их группы</li>
                <li>Права доступа</li>
            </ul>
        </li>

        <li><h3>Разное</h3>
            <ul>
                <li>Интерфейс ввода-вывода (I/O Interface)</li>
                <li>Сетевой интерфейс (Network Interface)</li>
            </ul>
        </li>
    </ul>

    <h2 id="-6">Основные абстракции ОС</h2>

    <h3 id="-7">Процессы и потоки</h3>

    </body>
</html>